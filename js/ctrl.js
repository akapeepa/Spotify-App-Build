app.controller("landingController",["$scope","$window","$document","$resource","spotifyService",function(a,r,e,t,i){function o(a){var r=Math.floor(a/6e4),e=(a%6e4/1e3).toFixed(0);return r+":"+(e<10?"0":"")+e}function s(){e.scrollTo(0,700,[1e3])}var u=this;u.searchQuery="",u.searchType="track",u.play=function(a,r){u.isPlaying=r;var e=1;null!=u.audio_curr&&u.pause(r,e),u.audio_curr=new Audio(a),u.audio_curr.play()},u.pause=function(a,r){u.audio_curr.pause(),1==r?u.isPlaying=a:u.isPlaying=null,u.audio_curr=null},u.search=function(a){var r=i.getResults(u.searchQuery,u.searchType,50);r.$promise.then(function(r){if(u.data=(r.tracks||r.artists||r.albums).items,"track"==a){u.songs=[];var e=0;angular.forEach(u.data,function(a,r){var t={};t.index="song"+e,e++,t.track=a.name,t.preview=a.preview_url,t.duration=o(a.duration_ms),t.popularity=a.popularity,t.album=a.album.name,t.artist=a.album.artists[0].name,t.logo=a.album.images[2].url,u.songs.push(t)})}else if("artist"==a){u.artists=[];var e=0;angular.forEach(u.data,function(a,r){var t={};t.index="artist"+e,e++,t.popularity=a.popularity,t.followers=a.followers.total,t.genres=a.genres,t.artist=a.name;var i=a.images[1];i?t.logo=i.url:t.logo="http://media.tumblr.com/tumblr_mf3r1eERKE1qgcb9y.jpg",u.artists.push(t)})}else if("album"==a){u.albums=[];var e=0;angular.forEach(u.data,function(a,r){var t={};t.index="song"+e,e++,t.artist=a.artists,t.type=a.album_type,t.logo=a.images[1].url,t.name=a.name,u.albums.push(t)})}s()})},u.isMobile=!1;var l=r.innerWidth;l<768&&(u.isMobile=!0),u.sortType="popularity",u.sortReverse=!0,u.filter=""}]);